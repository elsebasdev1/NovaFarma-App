<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Nova Farma | Cuenca</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #28a745; --dark: #343a40; --light: #f8f9fa; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: #e9ecef; }
        
        /* Login Styles */
        #login-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #28a745 0%, #218838 100%);
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        .login-card {
            background: white; padding: 2rem; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            width: 350px; text-align: center;
        }
        .login-card h2 { color: var(--primary); margin-bottom: 1.5rem; }
        .form-control {
            width: 100%; padding: 10px; margin-bottom: 1rem; border: 1px solid #ced4da; border-radius: 5px; box-sizing: border-box;
        }
        .btn-success {
            background-color: var(--primary); color: white; border: none; padding: 10px 20px;
            width: 100%; border-radius: 5px; cursor: pointer; font-size: 1rem; transition: 0.3s;
        }
        .btn-success:hover { background-color: #218838; }

        /* Main App Styles */
        #app-screen { display: none; height: 100vh; flex-direction: column; }
        header { background-color: var(--dark); color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center; }
        .brand { font-size: 1.2rem; font-weight: bold; display: flex; align-items: center; gap: 10px; }
        
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .sidebar { width: 250px; background-color: white; border-right: 1px solid #dee2e6; display: flex; flex-direction: column; }
        .menu-item {
            padding: 15px 20px; cursor: pointer; color: var(--dark); border-bottom: 1px solid #f1f1f1; transition: 0.2s;
        }
        .menu-item:hover, .menu-item.active { background-color: #e2e6ea; color: var(--primary); border-left: 4px solid var(--primary); }
        
        .content { flex: 1; padding: 20px; overflow-y: auto; }
        .card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        /* Ventas Module */
        .pos-container { display: flex; gap: 20px; height: 100%; }
        .product-list { flex: 2; overflow-y: auto; }
        .ticket { flex: 1; background: white; padding: 15px; border-radius: 8px; display: flex; flex-direction: column; }
        .product-item {
            display: flex; justify-content: space-between; padding: 10px; border-bottom: 1px solid #eee; align-items: center;
        }
        .btn-add { background: var(--primary); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; }
        
        /* Inventory Module */
        .alert-box { padding: 15px; border-radius: 5px; margin-bottom: 20px; color: #721c24; background-color: #f8d7da; border: 1px solid #f5c6cb; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #dee2e6; }
        th { background-color: #f8f9fa; }
        .badge { padding: 5px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: bold; }
        .bg-danger { background-color: #dc3545; color: white; }
        .bg-success { background-color: #28a745; color: white; }

    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <i class="fas fa-clinic-medical fa-3x" style="color: #28a745; margin-bottom: 10px;"></i>
            <h2>NOVA FARMA</h2>
            <p>Sistema de Gestión Integral</p>
            <input type="text" class="form-control" placeholder="Usuario (admin)" value="admin">
            <input type="password" class="form-control" placeholder="Contraseña" value="1234">
            <button class="btn-success" onclick="login()">INGRESAR AL SISTEMA</button>
            <p style="margin-top: 10px; font-size: 0.8rem; color: #666;">Versión 1.0.0 - Cuenca, EC</p>
        </div>
    </div>

    <div id="app-screen">
        <header>
            <div class="brand"><i class="fas fa-first-aid"></i> NOVA FARMA - Panel de Control</div>
            <div>
                <span style="margin-right: 15px;"><i class="fas fa-user-circle"></i> Administrador</span>
                <button onclick="logout()" style="background:none; border:none; color:white; cursor:pointer;"><i class="fas fa-sign-out-alt"></i> Salir</button>
            </div>
        </header>
        
        <div class="main-container">
            <div class="sidebar">
                <div class="menu-item active" onclick="showModule('ventas')"><i class="fas fa-cash-register"></i> Punto de Venta</div>
                <div class="menu-item" onclick="showModule('inventario')"><i class="fas fa-boxes"></i> Inventario & Stock</div>
                <div class="menu-item" onclick="alert('Función de reportes en construcción')"><i class="fas fa-chart-line"></i> Reportes</div>
            </div>

            <div class="content">
                <div id="module-ventas" class="pos-container">
                    <div class="card product-list">
                        <h3><i class="fas fa-search"></i> Catálogo de Productos</h3>
                        <input type="text" class="form-control" placeholder="Buscar medicamento por nombre o código..." onkeyup="filterProducts()">
                        <div id="products-container">
                            </div>
                    </div>
                    <div class="ticket">
                        <h3 style="text-align: center; border-bottom: 2px dashed #ccc; padding-bottom: 10px;">Ticket de Venta</h3>
                        <div id="cart-items" style="flex: 1; overflow-y: auto;">
                            <p style="text-align: center; color: #aaa; margin-top: 20px;">Carrito vacío</p>
                        </div>
                        <div style="border-top: 2px solid #333; padding-top: 10px; margin-top: 10px;">
                            <div style="display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold;">
                                <span>TOTAL:</span>
                                <span id="total-amount">$ 0.00</span>
                            </div>
                            <button class="btn-success" style="margin-top: 15px;" onclick="processSale()">COBRAR E IMPRIMIR</button>
                        </div>
                    </div>
                </div>

                <div id="module-inventario" style="display: none;">
                    <h2>Gestión de Inventario</h2>
                    <div class="alert-box">
                        <i class="fas fa-exclamation-triangle"></i> <strong>ALERTA CRÍTICA:</strong> Se han detectado 3 lotes de medicamentos próximos a caducar (menos de 90 días).
                    </div>
                    
                    <div class="card">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                            <h3>Existencias Actuales</h3>
                            <button class="btn-success" style="width: auto;"><i class="fas fa-plus"></i> Nuevo Lote</button>
                        </div>
                        <table>
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Producto</th>
                                    <th>Lote</th>
                                    <th>Stock</th>
                                    <th>Vencimiento</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>MED-001</td>
                                    <td>Amoxicilina 500mg</td>
                                    <td>L-2023-A</td>
                                    <td>12 un.</td>
                                    <td style="color: red; font-weight: bold;">2024-03-15</td>
                                    <td><span class="badge bg-danger">Por Vencer</span></td>
                                </tr>
                                <tr>
                                    <td>MED-004</td>
                                    <td>Paracetamol Jarabe</td>
                                    <td>L-2023-B</td>
                                    <td>5 un.</td>
                                    <td style="color: red; font-weight: bold;">2024-03-20</td>
                                    <td><span class="badge bg-danger">Por Vencer</span></td>
                                </tr>
                                <tr>
                                    <td>MED-010</td>
                                    <td>Ibuprofeno 400mg</td>
                                    <td>L-2024-X</td>
                                    <td>150 un.</td>
                                    <td>2025-12-01</td>
                                    <td><span class="badge bg-success">Óptimo</span></td>
                                </tr>
                                <tr>
                                    <td>MED-012</td>
                                    <td>Vitamina C + Zinc</td>
                                    <td>L-2024-Y</td>
                                    <td>80 un.</td>
                                    <td>2026-01-15</td>
                                    <td><span class="badge bg-success">Óptimo</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos simulados
        const products = [
            { id: 1, name: "Paracetamol 500mg", price: 0.50, stock: 100 },
            { id: 2, name: "Amoxicilina 500mg", price: 1.25, stock: 12 },
            { id: 3, name: "Ibuprofeno 400mg", price: 0.35, stock: 150 },
            { id: 4, name: "Vitamina C + Zinc", price: 5.00, stock: 80 },
            { id: 5, name: "Alcohol Antiséptico", price: 2.50, stock: 45 },
            { id: 6, name: "Mascarillas KN95", price: 0.75, stock: 200 }
        ];
        
        let cart = [];

        // Funciones del Sistema
        function login() {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-screen').style.display = 'flex';
            renderProducts();
        }

        function logout() {
            if(confirm("¿Cerrar sesión?")) {
                location.reload();
            }
        }

        function showModule(moduleName) {
            document.getElementById('module-ventas').style.display = 'none';
            document.getElementById('module-inventario').style.display = 'none';
            document.getElementById('module-' + moduleName).style.display = (moduleName === 'ventas' ? 'flex' : 'block');
            
            // Actualizar menú activo
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function renderProducts() {
            const container = document.getElementById('products-container');
            container.innerHTML = products.map(p => `
                <div class="product-item">
                    <div>
                        <strong>${p.name}</strong><br>
                        <small style="color: #666;">Stock: ${p.stock}</small>
                    </div>
                    <div style="display:flex; align-items:center; gap:10px;">
                        <span style="font-weight:bold; color:var(--primary);">$${p.price.toFixed(2)}</span>
                        <button class="btn-add" onclick="addToCart(${p.id})"><i class="fas fa-plus"></i></button>
                    </div>
                </div>
            `).join('');
        }

        function addToCart(id) {
            const product = products.find(p => p.id === id);
            cart.push(product);
            updateCart();
        }

        function updateCart() {
            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('total-amount');
            
            if (cart.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #aaa; margin-top: 20px;">Carrito vacío</p>';
                totalEl.innerText = "$ 0.00";
                return;
            }

            let total = 0;
            container.innerHTML = cart.map((item, index) => {
                total += item.price;
                return `
                <div style="display:flex; justify-content:space-between; margin-bottom:5px; font-size:0.9rem;">
                    <span>${item.name}</span>
                    <span>$${item.price.toFixed(2)}</span>
                </div>`;
            }).join('');
            
            totalEl.innerText = "$ " + total.toFixed(2);
        }

        function processSale() {
            if(cart.length === 0) return alert("El carrito está vacío");
            alert("¡Venta procesada correctamente!\n\nSe ha generado el ticket #004592\nSe ha descontado del inventario.");
            cart = [];
            updateCart();
        }
    </script>
</body>
</html>